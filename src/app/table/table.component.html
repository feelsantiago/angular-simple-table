<table class="table">
  <thead>
    <tr>
      <th *ngIf="expandable"></th>
      <th *ngIf="checkbox">
        <label *ngIf="checkbox.showSelectAll" class="checkbox">
          <input type="checkbox" (change)="onSelectAll($event)" />
        </label>
      </th>
      <th *ngFor="let column of columns">
        <p>{{ column.title }}</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let element of data; index as i">
      <tr
        [ngClass]="{
          'is-selected': selected(element, i)
        }"
      >
        <th *ngIf="expandable" (click)="onExpandRow(i)">
          <ng-template #defaultIcon> > </ng-template>
          <ng-container
            *ngIf="expandable"
            [ngTemplateOutlet]="expandable.icon?.templateRef || defaultIcon"
            [ngTemplateOutletContext]="{
              $implicit: element,
              index: i,
              expanded: expandedRow === i
            }"
          >
          </ng-container>
        </th>
        <td *ngIf="checkbox">
          <label class="checkbox">
            <input
              type="checkbox"
              [checked]="selected(element, i)"
              (change)="onElementSelected(element, i)"
            />
          </label>
        </td>
        <td *ngFor="let column of columns">
          <ng-container
            [ngTemplateOutlet]="column.template"
            [ngTemplateOutletContext]="{
              $implicit: element,
              index: i,
            }"
          >
          </ng-container>
        </td>
      </tr>
      <tr *ngIf="expandable && expandedRow === i">
        <td [attr.colspan]="columns.length + 2">
          <ng-container
            [ngTemplateOutlet]="expandable.template"
            [ngTemplateOutletContext]="{
                $implicit: element,
                index: i,
              }"
          >
          </ng-container>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>
